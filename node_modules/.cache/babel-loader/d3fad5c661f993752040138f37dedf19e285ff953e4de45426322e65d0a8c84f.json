{"ast":null,"code":"import _slicedToArray from\"/Users/saipalutla/Documents/GVSU/Winter 2023/CIS 658/AudioHub/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import\"./SongItem.css\";import{connect,useDispatch}from\"react-redux\";import{selectSong}from\"../actions\";import axios from\"axios\";import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SongItem=function SongItem(_ref){var song=_ref.song,index=_ref.index,selectSong=_ref.selectSong,selectedSongId=_ref.selectedSongId,playerState=_ref.playerState;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),setHovered=_useState2[1];var dispatch=useDispatch();var selector=function selector(){// function addToPlaylist(id) {\n//     const token = localStorage.getItem('jwtToken');\n//     try {\n//         const response = axios.post('http://35.193.89.249:8000/addToPlaylist', {\n//             token: token,\n//             songId: id,\n//         });\n//         if (response.status === 200) {\n//             toast.success('Song added to playlist!');\n//             console.log('song added to playlist')\n//         }\n//         if (response.status === 400 || response.status === 401) {\n//             console.log('haha error')\n//         }\n//     } catch (error) {\n//         toast.error('Failed to add song to playlist!');\n//         if (error.response.status === 400) {\n//             //console.log(error.response.data.message)\n//             //   setError(error.response.data.message)\n//             return;\n//         }\n//     }\n// }\nfunction addToPlaylist(id){var token=localStorage.getItem('jwtToken');return axios.post('http://35.193.89.249:8000/addToPlaylist',{token:token,songId:id}).then(function(response){if(response.status===200){toast.success('Song added to playlist');}}).catch(function(error){if(error.response.status===400){console.log(error.response.data.message);}toast.error('Error adding song to playlist');});}return/*#__PURE__*/_jsx(\"a\",{draggable:\"false\",onClick:function onClick(){return addToPlaylist(song._id);},children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z\"})})});};// Set song as active\nvar now_selected=selectedSongId===song.id?\"active\":\"\";// set the gif\nvar phaser=function phaser(){if(selectedSongId===song.id&&playerState){return/*#__PURE__*/_jsx(\"div\",{className:\"index\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:\"/playing.gif\",id:\"focused\",className:\"small-icon\"})});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"index\",children:index+1});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"song-item\",id:now_selected,onMouseOver:function onMouseOver(){return setHovered(true);},onMouseLeave:function onMouseLeave(){return setHovered(false);},onClick:function onClick(){selectSong(song);dispatch({type:\"PLAYER_STATE_SELECTED\",payload:1});},children:[phaser(),/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:song.title}),/*#__PURE__*/_jsx(\"div\",{className:\"author\",children:song.artist}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",children:selector()})]});};var mapStateToProps=function mapStateToProps(state){return{selectedSongId:state.selectedSongId,playerState:state.playerState};};export default connect(mapStateToProps,{selectSong:selectSong})(SongItem);","map":{"version":3,"names":["useState","connect","useDispatch","selectSong","axios","toast","jsx","_jsx","jsxs","_jsxs","SongItem","_ref","song","index","selectedSongId","playerState","_useState","_useState2","_slicedToArray","setHovered","dispatch","selector","addToPlaylist","id","token","localStorage","getItem","post","songId","then","response","status","success","catch","error","console","log","data","message","draggable","onClick","_id","children","xmlns","width","height","viewBox","fill","d","now_selected","phaser","className","alt","src","onMouseOver","onMouseLeave","type","payload","title","artist","mapStateToProps","state"],"sources":["/Users/saipalutla/Documents/GVSU/Winter 2023/CIS 658/AudioHub/src/components/SongItem.js"],"sourcesContent":["import { useState } from \"react\";\nimport \"./SongItem.css\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { selectSong } from \"../actions\";\nimport axios from \"axios\";\nimport { toast } from 'react-toastify';\n\nconst SongItem = ({ song, index, selectSong, selectedSongId, playerState }) => {\n    const [, setHovered] = useState(false);\n    const dispatch = useDispatch();\n\n    const selector = () => {\n        // function addToPlaylist(id) {\n        //     const token = localStorage.getItem('jwtToken');\n\n        //     try {\n        //         const response = axios.post('http://35.193.89.249:8000/addToPlaylist', {\n        //             token: token,\n        //             songId: id,\n        //         });\n\n        //         if (response.status === 200) {\n        //             toast.success('Song added to playlist!');\n        //             console.log('song added to playlist')\n        //         }\n        //         if (response.status === 400 || response.status === 401) {\n        //             console.log('haha error')\n        //         }\n\n        //     } catch (error) {\n        //         toast.error('Failed to add song to playlist!');\n        //         if (error.response.status === 400) {\n        //             //console.log(error.response.data.message)\n\n        //             //   setError(error.response.data.message)\n        //             return;\n        //         }\n\n        //     }\n        // }\n\n\n        function addToPlaylist(id) {\n            const token = localStorage.getItem('jwtToken');\n    \n            return axios.post('http://35.193.89.249:8000/addToPlaylist', {\n                token: token,\n                songId: id,\n            })\n            .then(response => {\n                if (response.status === 200) {\n                    toast.success('Song added to playlist')\n                }\n            })\n            .catch(error => {\n                if (error.response.status === 400) {\n                    console.log(error.response.data.message)\n                }\n                toast.error('Error adding song to playlist')\n            });\n        }\n        return (\n            <a\n                draggable=\"false\"\n                onClick={() => addToPlaylist(song._id)}\n            >\n                <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                >\n                    <path\n                        fill=\"currentColor\"\n                        d=\"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z\"\n                    />\n                </svg>\n            </a>\n        );\n    };\n\n    // Set song as active\n    const now_selected = selectedSongId === song.id ? \"active\" : \"\";\n\n    // set the gif\n    const phaser = () => {\n        if (selectedSongId === song.id && playerState) {\n            return (\n                <div className=\"index\">\n                    <img\n                        alt=\"\"\n                        src=\"/playing.gif\"\n                        id=\"focused\"\n                        className=\"small-icon\"\n                    />\n                </div>\n            );\n        } else {\n            return <div className=\"index\">{index + 1}</div>;\n        }\n    };\n    return (\n        <div\n            className={`song-item`}\n            id={now_selected}\n            onMouseOver={() => setHovered(true)}\n            onMouseLeave={() => setHovered(false)}\n            onClick={() => {\n                selectSong(song);\n                dispatch({ type: \"PLAYER_STATE_SELECTED\", payload: 1 });\n            }}\n        >\n            {phaser()}\n            <div className=\"name\">{song.title}</div>\n            <div className=\"author\">{song.artist}</div>\n            <div className=\"selector\">{selector()}</div>\n\n\n        </div>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        selectedSongId: state.selectedSongId,\n        playerState: state.playerState,\n    };\n};\n\nexport default connect(mapStateToProps, { selectSong })(SongItem);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}